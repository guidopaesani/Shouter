<html>
    <head>
        <meta name="viewport" content="width=device-width" />
        <title></title>
    </head>
    <body>
        <div class="container">

            @using (Html.BeginForm("Login", "Account", FormMethod.Post, new {@class = "form-horizontal", id = "frmLogin"}))
            {
                <h2 class="form-signin-heading">Please sign in</h2>
                <div class="form-group">
                    <label for="Email" class="col-sm-2 control-label">Email</label>
                    <div class="col-sm-10">
                        <input type="email" name="Email" id="Email" class="form-control" placeholder="Email" required autofocus>
                    </div>
                </div>
                <div class="form-group">
                    <label for="Password" class="col-sm-2 control-label">Password</label>
                    <div class="col-sm-10">
                        <input type="password" class="form-control" id="Password" name="Password" placeholder="Password" required autofocus>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="button" id="btnSubmit" class="btn btn-lg btn-primary btn-block">Sign in</button>
                    </div>
                </div>
        
                @Html.ValidationSummary()
            }
        </div> <!-- /container -->
    </body>
</html>

<script>
    $(document).ready(function() {
        $('#Email').focusout(function(e) {
            validateMail();
        });

        $('#btnSubmit').click(function(e) {
            if (validateMail()) {
                $('#frmLogin').submit();
            };
        });

        var validateMail = function(e) {
            var inputMail = $('#Email').val();
            var allowedFormat = RegExp('^[^@@]+@@[^@@]+\.[^@@]+$');
            if (!allowedFormat.test(inputMail)) {
                $('#Email').parent().removeClass('has-success').addClass('has-error');
                return false;
            } else {
                $('#Email').parent().addClass('has-success').removeClass('has-error');
                return true;
            }
        };
    });
</script>
